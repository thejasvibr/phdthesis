<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter5 Robust Self-Calibration of Constant Offset Time-Difference-of-Arrival | Beleyur-Thesis</title>
  <meta name="description" content="A thesis" />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter5 Robust Self-Calibration of Constant Offset Time-Difference-of-Arrival | Beleyur-Thesis" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="A thesis" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter5 Robust Self-Calibration of Constant Offset Time-Difference-of-Arrival | Beleyur-Thesis" />
  
  <meta name="twitter:description" content="A thesis" />
  

<meta name="author" content="Thejasvi Beleyur" />


<meta name="date" content="2020-11-07" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="ushichka.html"/>
<link rel="next" href="tacost-testing-and-simulating-the-performance-of-acoustic-tracking-systems.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>



<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="modeling-active-sensing-in-groups-of-bats-reveals-echo-detection-even-in-large-groups.html"><a href="modeling-active-sensing-in-groups-of-bats-reveals-echo-detection-even-in-large-groups.html"><i class="fa fa-check"></i><b>2</b> Modeling active sensing in groups of bats reveals echo detection even in large groups</a><ul>
<li class="chapter" data-level="" data-path="modeling-active-sensing-in-groups-of-bats-reveals-echo-detection-even-in-large-groups.html"><a href="modeling-active-sensing-in-groups-of-bats-reveals-echo-detection-even-in-large-groups.html#cpn_abstract"><i class="fa fa-check"></i>Abstract</a></li>
<li class="chapter" data-level="2.1" data-path="index.html"><a href="index.html#introduction"><i class="fa fa-check"></i><b>2.1</b> Introduction</a></li>
<li class="chapter" data-level="2.2" data-path="modeling-active-sensing-in-groups-of-bats-reveals-echo-detection-even-in-large-groups.html"><a href="modeling-active-sensing-in-groups-of-bats-reveals-echo-detection-even-in-large-groups.html#materials-and-methods"><i class="fa fa-check"></i><b>2.2</b> Materials and methods</a><ul>
<li class="chapter" data-level="2.2.1" data-path="modeling-active-sensing-in-groups-of-bats-reveals-echo-detection-even-in-large-groups.html"><a href="modeling-active-sensing-in-groups-of-bats-reveals-echo-detection-even-in-large-groups.html#model-scenarios"><i class="fa fa-check"></i><b>2.2.1</b> Model Scenarios</a></li>
<li class="chapter" data-level="2.2.2" data-path="modeling-active-sensing-in-groups-of-bats-reveals-echo-detection-even-in-large-groups.html"><a href="modeling-active-sensing-in-groups-of-bats-reveals-echo-detection-even-in-large-groups.html#model-implementation"><i class="fa fa-check"></i><b>2.2.2</b> Model Implementation</a></li>
<li class="chapter" data-level="2.2.3" data-path="modeling-active-sensing-in-groups-of-bats-reveals-echo-detection-even-in-large-groups.html"><a href="modeling-active-sensing-in-groups-of-bats-reveals-echo-detection-even-in-large-groups.html#model-parametrization"><i class="fa fa-check"></i><b>2.2.3</b> Model Parametrization</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="modeling-active-sensing-in-groups-of-bats-reveals-echo-detection-even-in-large-groups.html"><a href="modeling-active-sensing-in-groups-of-bats-reveals-echo-detection-even-in-large-groups.html#results"><i class="fa fa-check"></i><b>2.3</b> Results</a><ul>
<li class="chapter" data-level="2.3.1" data-path="modeling-active-sensing-in-groups-of-bats-reveals-echo-detection-even-in-large-groups.html"><a href="modeling-active-sensing-in-groups-of-bats-reveals-echo-detection-even-in-large-groups.html#effect-of-group-size-on-neighbor-detection"><i class="fa fa-check"></i><b>2.3.1</b> Effect of Group Size on Neighbor Detection</a></li>
<li class="chapter" data-level="2.3.2" data-path="modeling-active-sensing-in-groups-of-bats-reveals-echo-detection-even-in-large-groups.html"><a href="modeling-active-sensing-in-groups-of-bats-reveals-echo-detection-even-in-large-groups.html#effect-of-call-parameters-group-geometry-and-acoustic-parameters-on-neighbor-detection"><i class="fa fa-check"></i><b>2.3.2</b> Effect of Call Parameters, Group Geometry, and Acoustic Parameters on Neighbor Detection</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="modeling-active-sensing-in-groups-of-bats-reveals-echo-detection-even-in-large-groups.html"><a href="modeling-active-sensing-in-groups-of-bats-reveals-echo-detection-even-in-large-groups.html#discussion"><i class="fa fa-check"></i><b>2.4</b> Discussion</a><ul>
<li class="chapter" data-level="2.4.1" data-path="modeling-active-sensing-in-groups-of-bats-reveals-echo-detection-even-in-large-groups.html"><a href="modeling-active-sensing-in-groups-of-bats-reveals-echo-detection-even-in-large-groups.html#improved-echo-detection-in-real-world-situations"><i class="fa fa-check"></i><b>2.4.1</b> Improved Echo Detection in Real-World Situations</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="modeling-active-sensing-in-groups-of-bats-reveals-echo-detection-even-in-large-groups.html"><a href="modeling-active-sensing-in-groups-of-bats-reveals-echo-detection-even-in-large-groups.html#conclusion"><i class="fa fa-check"></i><b>2.5</b> Conclusion</a><ul>
<li class="chapter" data-level="2.5.1" data-path="modeling-active-sensing-in-groups-of-bats-reveals-echo-detection-even-in-large-groups.html"><a href="modeling-active-sensing-in-groups-of-bats-reveals-echo-detection-even-in-large-groups.html#acknowledgements"><i class="fa fa-check"></i><b>2.5.1</b> Acknowledgements</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="modeling-active-sensing-in-groups-of-bats-reveals-echo-detection-even-in-large-groups.html"><a href="modeling-active-sensing-in-groups-of-bats-reveals-echo-detection-even-in-large-groups.html#supplementary-information"><i class="fa fa-check"></i><b>2.6</b> Supplementary Information</a><ul>
<li class="chapter" data-level="2.6.1" data-path="modeling-active-sensing-in-groups-of-bats-reveals-echo-detection-even-in-large-groups.html"><a href="modeling-active-sensing-in-groups-of-bats-reveals-echo-detection-even-in-large-groups.html#model-parametrization-1"><i class="fa fa-check"></i><b>2.6.1</b> Model parametrization</a></li>
<li class="chapter" data-level="2.6.2" data-path="modeling-active-sensing-in-groups-of-bats-reveals-echo-detection-even-in-large-groups.html"><a href="modeling-active-sensing-in-groups-of-bats-reveals-echo-detection-even-in-large-groups.html#model-implementation-1"><i class="fa fa-check"></i><b>2.6.2</b> Model implementation</a></li>
<li class="chapter" data-level="2.6.3" data-path="modeling-active-sensing-in-groups-of-bats-reveals-echo-detection-even-in-large-groups.html"><a href="modeling-active-sensing-in-groups-of-bats-reveals-echo-detection-even-in-large-groups.html#open-source-software-used-in-the-research"><i class="fa fa-check"></i><b>2.6.3</b> Open-source software used in the research</a></li>
<li class="chapter" data-level="2.6.4" data-path="modeling-active-sensing-in-groups-of-bats-reveals-echo-detection-even-in-large-groups.html"><a href="modeling-active-sensing-in-groups-of-bats-reveals-echo-detection-even-in-large-groups.html#acknowledgements-1"><i class="fa fa-check"></i><b>2.6.4</b> Acknowledgements</a></li>
<li class="chapter" data-level="2.6.5" data-path="modeling-active-sensing-in-groups-of-bats-reveals-echo-detection-even-in-large-groups.html"><a href="modeling-active-sensing-in-groups-of-bats-reveals-echo-detection-even-in-large-groups.html#supplementary-schematics-tables-and-figures"><i class="fa fa-check"></i><b>2.6.5</b> Supplementary Schematics, Tables and Figures</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="horseshoe-bat-craziness-paper.html"><a href="horseshoe-bat-craziness-paper.html"><i class="fa fa-check"></i><b>3</b> Horseshoe bat craziness paper</a></li>
<li class="chapter" data-level="4" data-path="ushichka.html"><a href="ushichka.html"><i class="fa fa-check"></i><b>4</b> ushichka</a><ul>
<li class="chapter" data-level="4.1" data-path="ushichka.html"><a href="ushichka.html#example-one"><i class="fa fa-check"></i><b>4.1</b> Example one</a></li>
<li class="chapter" data-level="4.2" data-path="ushichka.html"><a href="ushichka.html#example-two"><i class="fa fa-check"></i><b>4.2</b> Example two</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="robust-self-calibration-of-constant-offset-time-difference-of-arrival.html"><a href="robust-self-calibration-of-constant-offset-time-difference-of-arrival.html"><i class="fa fa-check"></i><b>5</b> Robust Self-Calibration of Constant Offset Time-Difference-of-Arrival</a><ul>
<li class="chapter" data-level="" data-path="robust-self-calibration-of-constant-offset-time-difference-of-arrival.html"><a href="robust-self-calibration-of-constant-offset-time-difference-of-arrival.html#sfsabstract"><i class="fa fa-check"></i>Abstract</a></li>
<li class="chapter" data-level="5.1" data-path="index.html"><a href="index.html#introduction"><i class="fa fa-check"></i><b>5.1</b> Introduction</a></li>
<li class="chapter" data-level="5.2" data-path="robust-self-calibration-of-constant-offset-time-difference-of-arrival.html"><a href="robust-self-calibration-of-constant-offset-time-difference-of-arrival.html#time-difference-of-arrival-self-calibration"><i class="fa fa-check"></i><b>5.2</b> Time-difference-of-arrival self calibration</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="tacost-testing-and-simulating-the-performance-of-acoustic-tracking-systems.html"><a href="tacost-testing-and-simulating-the-performance-of-acoustic-tracking-systems.html"><i class="fa fa-check"></i><b>6</b> <code>tacost</code>: Testing and simulating the performance of acoustic tracking systems</a><ul>
<li class="chapter" data-level="" data-path="tacost-testing-and-simulating-the-performance-of-acoustic-tracking-systems.html"><a href="tacost-testing-and-simulating-the-performance-of-acoustic-tracking-systems.html#tacostabstract"><i class="fa fa-check"></i>Abstract</a></li>
<li class="chapter" data-level="6.1" data-path="index.html"><a href="index.html#introduction"><i class="fa fa-check"></i><b>6.1</b> Introduction</a></li>
<li class="chapter" data-level="6.2" data-path="tacost-testing-and-simulating-the-performance-of-acoustic-tracking-systems.html"><a href="tacost-testing-and-simulating-the-performance-of-acoustic-tracking-systems.html#statement-of-need"><i class="fa fa-check"></i><b>6.2</b> Statement of need</a></li>
<li class="chapter" data-level="6.3" data-path="tacost-testing-and-simulating-the-performance-of-acoustic-tracking-systems.html"><a href="tacost-testing-and-simulating-the-performance-of-acoustic-tracking-systems.html#design"><i class="fa fa-check"></i><b>6.3</b> Design</a></li>
<li class="chapter" data-level="6.4" data-path="tacost-testing-and-simulating-the-performance-of-acoustic-tracking-systems.html"><a href="tacost-testing-and-simulating-the-performance-of-acoustic-tracking-systems.html#examples"><i class="fa fa-check"></i><b>6.4</b> Examples</a><ul>
<li class="chapter" data-level="6.4.1" data-path="tacost-testing-and-simulating-the-performance-of-acoustic-tracking-systems.html"><a href="tacost-testing-and-simulating-the-performance-of-acoustic-tracking-systems.html#localisation-accuracy-of-the-tristar60-system"><i class="fa fa-check"></i><b>6.4.1</b> Localisation accuracy of the tristar60 system</a></li>
<li class="chapter" data-level="6.4.2" data-path="tacost-testing-and-simulating-the-performance-of-acoustic-tracking-systems.html"><a href="tacost-testing-and-simulating-the-performance-of-acoustic-tracking-systems.html#localisation-accuracy-of-a-multi-microphone-array-in-the-field"><i class="fa fa-check"></i><b>6.4.2</b> Localisation accuracy of a multi-microphone array in the field</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="tacost-testing-and-simulating-the-performance-of-acoustic-tracking-systems.html"><a href="tacost-testing-and-simulating-the-performance-of-acoustic-tracking-systems.html#future-directions"><i class="fa fa-check"></i><b>6.5</b> Future directions</a></li>
<li class="chapter" data-level="6.6" data-path="modeling-active-sensing-in-groups-of-bats-reveals-echo-detection-even-in-large-groups.html"><a href="modeling-active-sensing-in-groups-of-bats-reveals-echo-detection-even-in-large-groups.html#acknowledgements"><i class="fa fa-check"></i><b>6.6</b> Acknowledgements</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="itsfm.html"><a href="itsfm.html"><i class="fa fa-check"></i><b>7</b> itsfm</a><ul>
<li class="chapter" data-level="7.1" data-path="ushichka.html"><a href="ushichka.html#example-one"><i class="fa fa-check"></i><b>7.1</b> Example one</a></li>
<li class="chapter" data-level="7.2" data-path="ushichka.html"><a href="ushichka.html#example-two"><i class="fa fa-check"></i><b>7.2</b> Example two</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="modeling-active-sensing-in-groups-of-bats-reveals-echo-detection-even-in-large-groups.html"><a href="modeling-active-sensing-in-groups-of-bats-reveals-echo-detection-even-in-large-groups.html#conclusion"><i class="fa fa-check"></i><b>8</b> Conclusion</a></li>
<li class="chapter" data-level="9" data-path="modeling-active-sensing-in-groups-of-bats-reveals-echo-detection-even-in-large-groups.html"><a href="modeling-active-sensing-in-groups-of-bats-reveals-echo-detection-even-in-large-groups.html#acknowledgements"><i class="fa fa-check"></i><b>9</b> Acknowledgements</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Beleyur-Thesis</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="robust-self-calibration-of-constant-offset-time-difference-of-arrival" class="section level1">
<h1><span class="header-section-number">Chapter5</span> Robust Self-Calibration of Constant Offset Time-Difference-of-Arrival</h1>

<p>This chapter was published as a peer-reviewed paper in the conference proceedings of the International Conference on Acoustics, Speech, and Signal Processing:</p>
<p><em>Batstone, K., Flood, G., Beleyur, T., Larsson, V., Goerlitz, H. R., Oskarsson, M., &amp; Åström, K. (2019, May). Robust self-calibration of constant offset time-difference-of-arrival. In ICASSP 2019-2019 IEEE International Conference on Acoustics, Speech and Signal Processing (ICASSP) (pp. 4410-4414). IEEE.</em></p>
<div style="page-break-after: always;"></div>
<div id="sfsabstract" class="section level2 unnumbered">
<h2>Abstract</h2>
<p>In this paper we study the problem of estimating receiver and sender positions from time-difference-of-arrival measurements, assuming an unknown constant time-difference-of-arrival offset. This problem is relevant for example for repetitive sound events. In this paper it is shown that there are three minimal cases to the problem. One of these (the five receiver, five sender problem) is of particular importance. A fast solver (with run-time under <span class="math inline">\(4~ \mu s\)</span>) is given. We show how this solver can be used in robust estimation algorithms, based on RANSAC, for obtaining an initial estimate followed by local optimization using a robust error norm. The system is verified on both real and synthetic data.</p>
<div style="page-break-after: always;"></div>
</div>
<div id="introduction" class="section level2">
<h2><span class="header-section-number">5.1</span> Introduction</h2>
<p>The problem of estimating receiver-sender node positions from measured arrival times of radio or sound signals is a key issue in different applications such as microphone array calibration, radio antenna array calibration, mapping and positioning. This field is well researched but in this paper we will focus on the anchor-free sensor network calibration both in terms of time-of-arrival measurements (TOA) and time-difference-of-arrival measurements (TDOA).
For time-of-arrival the planar case of three receivers and three senders (3R/3S) was solved in .
For the full 3D case the over-determined problem (10R/4S) was studied in , where a solver for this non-minimal case was provided.<br />
There are actually three minimal cases for the 3D case, namely (4R/6S), (5R/5S) and (6R/5S). A practical solver was presented in
. There are in general <span class="math inline">\(38\)</span>, <span class="math inline">\(42\)</span> and <span class="math inline">\(38\)</span> solutions respectively for the three different set ups.
Faster solvers for these minimal cases were provided in .</p>
<p>In this paper we study the constant offset TDOA self-calibration problem. It is a problem that naturally arises e.g. when signals are emitted with a known period. As an estimation problem it lies between TOA and full TDOA. In the paper we study the minimal (5R/5S) problem and provide a fast (few <span class="math inline">\(\mu s\)</span>) solver.
Robust parameter estimation often use the hypothesize and test paradigm, e.g. using random sampling consensus,  or one of its many variants . In these frameworks minimal solvers are important building blocks for generating model hypotheses, and we show in the paper how a minimal solver can be used for robust parameter estimation of sender positions, receiver positions and unknown offset. The system is capable of handling missing data, outliers and noise. The algorithms are tested on synthetic data as well as real data, in an office environment and in a cave.The methods are straightforward to generalize for degenerate configurations which arise if senders or receivers are restricted to a plane or to a line.</p>
</div>
<div id="time-difference-of-arrival-self-calibration" class="section level2">
<h2><span class="header-section-number">5.2</span> Time-difference-of-arrival self calibration</h2>
<p>The problem we are considering involves <span class="math inline">\(m\)</span> receiver positions <span class="math inline">\(\mathbf{r}_i \in \mathbb R^3\)</span>, $ i = 1, , m,$ and <span class="math inline">\(n\)</span> sender positions <span class="math inline">\(\mathbf{s}_j \in ^3\)</span>, $ j = 1, , n$. This could for example represent the microphone positions and locations of sound emissions, respectively. Assume that the arrival time of a sound <span class="math inline">\(j\)</span> to receiver <span class="math inline">\(i\)</span> is <span class="math inline">\(t_{ij}\)</span> and that the time that sound <span class="math inline">\(j\)</span> is emitted is <span class="math inline">\(T_j\)</span>.
Multiplying the travel time <span class="math inline">\(t_{ij} - T_j\)</span> with the speed <span class="math inline">\(v\)</span> of the signal we obtain the distance between senders and receiver,</p>
<p><span class="math display">\[\begin{equation}
v (t_{ij}-T_j)   = {\norm{\mathbf{r}_i - \mathbf{s}_j}}_2 ,
\label{eq:tdoa}
\end{equation}\]</span>
where <span class="math inline">\({\norm{.}}_2\)</span> is the -norm. The speed <span class="math inline">\(v\)</span> is throughout the paper assumed to be known and constant.</p>
<p>In many settings the times of emissions <span class="math inline">\(T_j\)</span> are unknown, but regular, 
<span class="math display">\[\begin{equation}
T_j = k_1 j + k_0, 
\label{eq:regular}
\end{equation}\]</span>
where the interval <span class="math inline">\(k_1\)</span> is known. Inserting  into  we
obtain
<span class="math display">\[\begin{equation}
v (t_{ij}-k_1 j - k_0)   = {\norm{\mathbf{r}_i - \mathbf{s}_j}}_2 . 
\end{equation}\]</span>
Assuming an erroneous (but regular) emission time
<span class="math inline">\(\tilde{T}_j = k_1 j + \tilde{k}_0\)</span> and
introducing (the measured) <span class="math inline">\(z_{ij} = v (t_{ij}-\tilde{T}_j)\)</span> and (the unknown) <span class="math inline">\(o = v (k_0-\tilde{k}_0)\)</span> yields the following expression
<span class="math display">\[\begin{equation}
 z_{ij}   = {\norm{\mathbf{r}_i - \mathbf{s}_j}}_2 + o. 
\end{equation}\]</span>
Note that this is a simplified variant of the general time-difference-of-arrival problem (see ), which allows for a different offset <span class="math inline">\(o\)</span> for every <span class="math inline">\(j\)</span>,
<span class="math display">\[\begin{equation}
 z_{ij}   = {\norm{\mathbf{r}_i - \mathbf{s}_j}}_2 + o_j.
\end{equation}\]</span></p>


Here we will use the set <span class="math inline">\(\Win\)</span> for the indices <span class="math inline">\((i,j)\)</span> corresponding to the inlier measurements and <span class="math inline">\(\Wout\)</span> for the indices corresponding to the outlier set.


<p>If an initial estimate of the parameters <span class="math inline">\(\theta_1 = \{ R, S, o \}\)</span> is given and if the set of inliers is known, then refinement of the estimate can be found by optimization methods, Levenberg-Marquardt (LM) ,
<span class="math display">\[\begin{equation}
\min_{\theta_1} f(\theta_1) = \sum_{(i,j) \in \Win} (z_{ij} - ( {\norm{\mathbf{r}_i - \mathbf{s}_j}}_2 +o) )^2 .
\end{equation}\]</span></p>
<p>There is an interesting relaxation to the problem, that exploits the fact that the matrix with elements $ (z_{ij}-o)^2 $ is rank <span class="math inline">\(5\)</span>, . Further simplifications use the double compaction method . The double compaction matrix <span class="math inline">\(M\)</span> is defined as the matrix with elements
<span class="math display">\[\begin{equation}
M_{ij}=(z_{ij}-o)^2 -a_i-b_j,
\label{eq:dc}
\end{equation}\]</span>
and it can be shown to have rank <span class="math inline">\(3\)</span>, i.e. <span class="math inline">\(M = U^T V\)</span>, where <span class="math inline">\(U\)</span> is of size <span class="math inline">\(3 \times m\)</span> and <span class="math inline">\(V\)</span> is of size <span class="math inline">\(3 \times n\)</span>.
The relaxed problem involves a set of parameters
<span class="math inline">\(\theta_2 = \{ U, V, b, a, o \}\)</span>. Here the constraints can be written as
<span class="math display">\[\begin{equation}
z_{ij} =  \sqrt{u_i^T v_j + a_i + b_j} + o ,
\end{equation}\]</span>
where <span class="math inline">\(u_i\)</span> denotes column <span class="math inline">\(i\)</span> of <span class="math inline">\(U\)</span> and <span class="math inline">\(v_j\)</span> denotes column <span class="math inline">\(j\)</span> of <span class="math inline">\(V\)</span>.
Refinement of parameters can be done by performing local optimization on
<span class="math display">\[\begin{equation}
\min_{\theta_2} f(\theta_2) = \sum_{(i,j) \in \Win} \left ( z_{ij} - ( \sqrt{u_i^T v_j + a_i + b_j} + o ) \right )^2 .
\label{eq:relaxed}
\end{equation}\]</span></p>

<p>By counting equations and unknowns, one finds that there are three minimal problems. The first two are the symmetric case when <span class="math inline">\(m=4, n=7\)</span> or <span class="math inline">\(m=7, n=4\)</span>. This case is not addressed in this paper, but we believe it to be difficult to solve. The other case is <span class="math inline">\(m=n= 5\)</span>. Here, we first present a solver for the constant offset and then discuss how to solve for sender and receiver positions.</p>
Given a <span class="math inline">\(5 \times 5\)</span> matrix, <span class="math inline">\(Z\)</span>, with time-difference-of-arrival measurements <span class="math inline">\(z_{ij}\)</span>, the rank <span class="math inline">\(3\)</span> constraint on the double compaction matrix in 
can be written as
<span class="math display">\[\begin{equation}
f(o) = \det ( C^T (Z-o)^{\circ 2} C )  = 0, 
\end{equation}\]</span>
where
<span class="math display">\[\begin{equation}
C = \begin{pmatrix}
-1 &amp; -1 &amp; -1 &amp; -1\\
1 &amp; 0 &amp; 0 &amp; 0\\
0  &amp; 1 &amp; 0 &amp; 0\\
0 &amp; 0 &amp; 1 &amp; 0 \\
0 &amp; 0 &amp; 0 &amp; 1 
\end{pmatrix} 
\end{equation}\]</span>
and <span class="math inline">\(^{\circ 2}\)</span> denotes element-wise squaring (Hadamard power).
Although the elements of $ (Z-o)^{2}$ are of degree 2 in <span class="math inline">\(o\)</span>, the quadratic terms cancel out after multiplication with <span class="math inline">\(C^T\)</span> and <span class="math inline">\(C\)</span>. Thus the elements of <span class="math inline">\(C^T (Z-o)^{\circ 2} C\)</span> are linear in <span class="math inline">\(o\)</span>.
Since the determinant is linear in each column, the determinant <span class="math inline">\(f(o)\)</span> is a polynomial of degree four in the offset <span class="math inline">\(o\)</span>. This can be summarized as

<p>For each solution <span class="math inline">\(o\)</span> it is possible to generate a solution <span class="math inline">\(\theta_2\)</span> to the relaxed problem,
according to</p>
<p><span class="math display">\[\begin{equation*}
\! b \! = \! \begin{pmatrix} (z_{11} \! - \! o)^2  \! \!  &amp;  \! \!  (z_{12}-o)^2  \! \!  &amp;  \! \!  (z_{13}-o)^2 \! \!  &amp;  \! \!   (z_{14}-o)^2 \! \!  &amp;  \! \!   (z_{15}-o)^2 \end{pmatrix} \! ,
\end{equation*}\]</span>
<span class="math display">\[\begin{equation}
a =  \begin{pmatrix} 0 \\ (z_{21}-o)^2 -(z_{11}-o)^2\\ (z_{31}-o)^2 -(z_{11}-o)^2 \\ (z_{41}-o)^2 -(z_{11}-o)^2 \\ (z_{51}-o)^2 -(z_{11}-o)^2 \end{pmatrix},
\end{equation}\]</span>
<span class="math display">\[\begin{equation}
U =  \begin{pmatrix} 0 &amp; u_2 &amp; u_3 &amp; u_4 &amp; u_5\end{pmatrix}, 
\end{equation}\]</span>
<span class="math display">\[\begin{equation}
V =  \begin{pmatrix}0 &amp; v_2 &amp; v_3 &amp; v_4 &amp; v_5\end{pmatrix} ,
\end{equation}\]</span>
where <span class="math inline">\(\begin{pmatrix}u_2 &amp; u_3 &amp; u_4 &amp; u_5\end{pmatrix}^T \begin{pmatrix} v_2 &amp; v_3 &amp; v_4 &amp; v_5\end{pmatrix}\)</span> is any rank <span class="math inline">\(3\)</span> factorization of the matrix <span class="math inline">\(C^T (Z-o)^{\circ 2} C\)</span>.</p>
<p>From a solution <span class="math inline">\(\theta_2\)</span> to the relaxed problem it is possible to upgrade to a solution <span class="math inline">\(\theta_1\)</span> to the original problem. This involves solving a system of polynomial equations. The procedure was first described in , where an algorithm for solving this was presented. Recently, a faster algorithm was presented in .</p>
<p>An efficient implementation for calculating the four solutions of the offset <span class="math inline">\(o\)</span> given the measurements <span class="math inline">\(z\)</span> takes <span class="math inline">\(4~ \mu s\)</span> for a C++-implementation. Generating the solution <span class="math inline">\(\theta_2\)</span> to the relaxed problem adds a few <span class="math inline">\(\mu s\)</span>. However, calculating a solution <span class="math inline">\(\theta_1\)</span> to the original problem takes another <span class="math inline">\(22 ~ms\)</span>. Thus, it is advantageous to estimate the parameters of the relaxed problem and postpone the upgrade from <span class="math inline">\(\theta_2\)</span> to <span class="math inline">\(\theta_1\)</span> as a final step, see Table .</p>



<p>We propose the use of the fast minimal solver in an hypothesize and test framework to obtain (i) a initial estimate on the offset <span class="math inline">\(o\)</span> and (ii) an initial inlier set. The steps are described in Algorithm~</p>


We use these minimal solvers with RANSAC as described in the previous section to find one or several initial estimates of the parameters <span class="math inline">\(\theta_2\)</span> for a subset of five receivers and <span class="math inline">\(k\)</span> senders. The solution is extended to additional rows and/or columns using robust techniques as described in . During this process it is useful to keep the errors down by occasionally refining the solutions using local optimization. This has shown to reduce failures, see e.g. .
In the proposed estimation algorithm we postpone the upgrade from <span class="math inline">\(\theta_2\)</span> to <span class="math inline">\(\theta_1\)</span> until we have found a good solution involving a large portion of the receiver and sender positions.


To test the numerical accuracy and robustness of our minimal solver we conducted an experiment using simulated data without noise. We generated a large number of instance problems (10,000) with known offsets. We then ran our solvers and compared the returned solutions with the ground truth solution. For each instance problem we recorded the distance to the closest solution. In Figure~ the resulting histogram of the logarithm of the absolute errors are shown. As can be seen, both implementations get close to machine precision.


<p>We have tested our system on (i) experiments made in an office environment and (ii) experiments made at the Orlova Chuka cave, Bulgaria.</p>
<p>For the office experiments, 12 microphones (8x t.bone MM-1, 4x Shure SV100) were positioned around a room (<span class="math inline">\(\sim 3 \times 5~m^2\)</span>) and measured using a laser to obtain ground truth positions of the microphones with an error of <span class="math inline">\(\pm 2~ mm\)</span>. The space was cleared of most the furniture to create an open space to conduct the experiment in. The sound recordings were captured using a Roland UA-1610 Sound Capture audio interface and automatically amplified. The recordings were made using the open source software Audacity 2.3.0 with a sampling frequency of <span class="math inline">\(96~kHz\)</span> on a laptop. A synthetically generated chirp was then played using a simple loudspeaker every half second for <span class="math inline">\(30~s\)</span> while moving the speaker around in the room.</p>
<p>For the cave experiments, 12 microphones (4x Sanken CO-100K, 8x Knowles SPU0410) were positioned in a section of the cave, four microphones were placed on an inverted T array near one wall, while the other eight microphones were placed on the adjacent wall. The sound recordings were captured using pre-amplifiers (Quadmic, RME) and two synchronised Fireface 800 (RME) audio interfaces running at a sampling frequency of <span class="math inline">\(192 ~kHz\)</span>. Recording and playback were controlled via a custom written script based on the sound device library
 in Python 2.7.12 . Ultrasonic chirps (<span class="math inline">\(8~ms\)</span>, <span class="math inline">\(16-96~kHz\)</span> upward hyperbolic sweep) were played every second via one of the audio interfaces, amplified (Basetech AP-2100) and presented through a Peerless XT25SC90-04 loudspeaker. The speaker was attached to a 3-m-long pole and slowly waved in the approximately <span class="math inline">\(5 \times 9 \times 3 ~m^3\)</span> recording volume. Playbacks were done past 6:00 am to prevent disturbing the resident bat population.</p>

<p>Once the office recordings were taken, an algorithm was used to find the chirps in the captured sound recordings and the algorithm then outputs the <span class="math inline">\(z_{ij}\)</span> matrix. This can then be used in our RANSAC scheme, Algorithm~. For this experiment we used the (5R/5S) minimal solver. A fixed number of iterations was used; 100 iterations for the initial selection of 5 receivers and senders, then the extension to more columns and rows was allowed until there was no better solution. The tolerance was set to <span class="math inline">\(T=0.01\)</span> for the initial selection and extension of rows and column.</p>
<p>Once the initial values have been estimated, it underwent <span class="math inline">\(l^{2}\)</span> optimization on the inlier set. The results of the estimated microphone positions after the optimization are shown in Figure~.</p>
<p>This produced an Euclidean distance error between each of the microphones calculated position and its ground truth position as $(0.2016,0.0587,0.1444,0.1153,0.2017, 0.1326, $ <span class="math inline">\(0.1407, 0.1198,0.2041,0.2010,0.1908,0.2110)~ m\)</span>.</p>
<p>For graphical purposes, a Procrustes fitting was used on the microphone positions to spread the total error over all 12 microphones. In the Procrustes fitting only rotation and translation were allowed.</p>
<p>For the cave experiment a similar scheme was devised and the results are shown in Figure~.</p>



<p>In this paper, a novel method has been constructed to efficiently solve a TDOA problem with a constant offset. This has been verified using simulated data to test the solver and real experimental data to test our algorithms in realistic scenarios.</p>
<p>Looking at Figure~ and Table~, it can be seen that the calculation of the offsets and the calculation of the relaxed form <span class="math inline">\(\theta_2\)</span> are very fast solvers without loss in numerical accuracy. The advantage of this is that when using a RANSAC approach, the iterations are performed quickly, giving a good initial estimate in which to optimize over, which is important in highly
non-linear systems such as this.</p>
<p>Looking at the results from the office experiment, Figure~, we can see that the calculated microphone positions are accurate and the residuals are small, mostly in the range <span class="math inline">\(\pm 0.04~m\)</span>. Further to this our inlier set appears to be accurate. The first and last few columns (corresponding to sound emissions) are not used in our initialisation. This is correct because the recording started before the chirps were sounded and ended after, so the chirp detection algorithm falsely determined that they were also chirps but our method decided that the data in those regions do not fit the model. A comparison of the calculated microphone positions were made to a solution from a Full TDOA system, , which produced similar results and very similar residuals. This provided a sanity check that the chirp detection was working correctly and that from this dataset a better solution could not be found.</p>
<p>For the cave experiment, similar conclusions can be made, since the residuals are very low, we can conclude that we have an accurate model. This gives a real life example of how algorithms such as the one proposed can be used.</p>
<p>For future work, the study of the number of inliers could be of use. At the moment our algorithm may not extend to more rows and columns if the initial solution is poor, perturbing our final solution. Perhaps a method which could adapt the initial selection in order to give a required amount of inliers could be more advantageous.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="ushichka.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="tacost-testing-and-simulating-the-performance-of-acoustic-tracking-systems.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["beleyur_thesis.pdf"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
